<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>AusGen - Enter Driver's License Details</title>
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.20.15/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;

    const App = () => {
      const [isDark, setIsDark] = useState(true);
      const [isLoaded, setIsLoaded] = useState(false);
      const [formData, setFormData] = useState({
        licenseNumber: '',
        licenseName: '',
        dateOfBirth: '',
        expiryDate: ''
      });
      const [errors, setErrors] = useState({});
      const [showOverlay, setShowOverlay] = useState(false);

      useEffect(() => {
        setTimeout(() => setIsLoaded(true), 300);
      }, []);

      const toggleTheme = () => {
        setIsDark(!isDark);
      };

      const handleInputChange = (e) => {
        const { name, value } = e.target;
        setFormData(prev => ({ ...prev, [name]: value }));
      };

      const validateForm = () => {
        const newErrors = {};
        if (!/^[A-Z0-9]{6,12}$/.test(formData.licenseNumber)) {
          newErrors.licenseNumber = 'Please enter a valid license number (6-12 alphanumeric characters)';
        }
        if (!formData.licenseName.trim()) {
          newErrors.licenseName = 'Please enter full name';
        }
        if (!/^\d{2}\/\d{2}\/\d{4}$/.test(formData.dateOfBirth)) {
          newErrors.dateOfBirth = 'Please enter a valid date of birth (DD/MM/YYYY)';
        }
        if (!/^\d{2}\/\d{2}\/\d{4}$/.test(formData.expiryDate)) {
          newErrors.expiryDate = 'Please enter a valid expiry date (DD/MM/YYYY)';
        }
        setErrors(newErrors);
        return Object.keys(newErrors).length === 0;
      };

      const handleSubmit = (e) => {
        e.preventDefault();
        if (validateForm()) {
          const states = ['nsw', 'vic', 'qld', 'wa'];
          states.forEach(state => {
            localStorage.setItem(`${state}_licenseName`, formData.licenseName.toUpperCase());
            localStorage.setItem(`${state}_licenseNumber`, formData.licenseNumber);
            localStorage.setItem(`${state}_dateOfBirth`, formData.dateOfBirth);
            localStorage.setItem(`${state}_expiryDate`, formData.expiryDate);
          });
          setShowOverlay(true);
        }
      };

      const handleStateSelect = (state) => {
        let url = '';
        switch (state) {
          case 'nsw': url = '../licence_cards/nsw.html'; break;
          case 'vic': url = '../licence_cards/vic.html'; break;
          case 'qld': url = '../licence_cards/qld.html'; break;
          case 'wa': url = '../licence_cards/wa.html'; break;
        }
        if (url) window.location.href = url;
      };

      return (
        <div className={`min-h-screen flex flex-col transition-colors duration-300 ${
          isDark ? 'bg-gray-900' : 'bg-gray-100'
        } overflow-hidden`}>
          <div className={`w-full max-w-sm mx-auto flex-1 flex flex-col ${
            isDark ? 'bg-gray-800' : 'bg-white'
          } rounded-2xl shadow-xl transition-all duration-500 ${
            isLoaded ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-4'
          } p-4 sm:p-6`}>
            {/* Header */}
            <h1 className={`text-xl sm:text-2xl font-bold text-center ${
              isDark ? 'text-white' : 'text-gray-900'
            } animate-[fadeUp_0.6s_0.2s_forwards]`}>
              Enter Driver's License Details
            </h1>

            {/* Form */}
            <div className="flex-1 flex flex-col gap-4 sm:gap-5 mt-4 sm:mt-6">
              <div className="flex flex-col">
                <label htmlFor="licenseNumber" className={`text-sm sm:text-base font-medium ${
                  isDark ? 'text-gray-300' : 'text-gray-700'
                } mb-1`}>License Number</label>
                <input
                  type="text"
                  id="licenseNumber"
                  name="licenseNumber"
                  value={formData.licenseNumber}
                  onChange={handleInputChange}
                  placeholder="Enter license number"
                  className={`w-full p-3 rounded-lg text-sm sm:text-base ${
                    isDark ? 'bg-gray-700 text-white border-gray-600' : 'bg-gray-200 text-gray-900 border-gray-300'
                  } border focus:ring-2 ${
                    errors.licenseNumber ? 'border-red-500 focus:ring-red-500' : 'focus:ring-orange-500'
                  } transition-all`}
                />
                {errors.licenseNumber && (
                  <span className="text-red-500 text-xs mt-1 animate-[shake_0.3s]">{errors.licenseNumber}</span>
                )}
              </div>

              <div className="flex flex-col">
                <label htmlFor="licenseName" className={`text-sm sm:text-base font-medium ${
                  isDark ? 'text-gray-300' : 'text-gray-700'
                } mb-1`}>Full Name</label>
                <input
                  type="text"
                  id="licenseName"
                  name="licenseName"
                  value={formData.licenseName}
                  onChange={handleInputChange}
                  placeholder="Full Name"
                  className={`w-full p-3 rounded-lg text-sm sm:text-base ${
                    isDark ? 'bg-gray-700 text-white border-gray-600' : 'bg-gray-200 text-gray-900 border-gray-300'
                  } border focus:ring-2 ${
                    errors.licenseName ? 'border-red-500 focus:ring-red-500' : 'focus:ring-orange-500'
                  } transition-all`}
                />
                {errors.licenseName && (
                  <span className="text-red-500 text-xs mt-1 animate-[shake_0.3s]">{errors.licenseName}</span>
                )}
              </div>

              <div className="flex flex-col">
                <label htmlFor="dateOfBirth" className={`text-sm sm:text-base font-medium ${
                  isDark ? 'text-gray-300' : 'text-gray-700'
                } mb-1`}>Date of Birth</label>
                <input
                  type="text"
                  id="dateOfBirth"
                  name="dateOfBirth"
                  value={formData.dateOfBirth}
                  onChange={handleInputChange}
                  placeholder="DD/MM/YYYY"
                  className={`w-full p-3 rounded-lg text-sm sm:text-base ${
                    isDark ? 'bg-gray-700 text-white border-gray-600' : 'bg-gray-200 text-gray-900 border-gray-300'
                  } border focus:ring-2 ${
                    errors.dateOfBirth ? 'border-red-500 focus:ring-red-500' : 'focus:ring-orange-500'
                  } transition-all`}
                />
                {errors.dateOfBirth && (
                  <span className="text-red-500 text-xs mt-1 animate-[shake_0.3s]">{errors.dateOfBirth}</span>
                )}
              </div>

              <div className="flex flex-col">
                <label htmlFor="expiryDate" className={`text-sm sm:text-base font-medium ${
                  isDark ? 'text-gray-300' : 'text-gray-700'
                } mb-1`}>Expiry Date</label>
                <input
                  type="text"
                  id="expiryDate"
                  name="expiryDate"
                  value={formData.expiryDate}
                  onChange={handleInputChange}
                  placeholder="DD/MM/YYYY"
                  className={`w-full p-3 rounded-lg text-sm sm:text-base ${
                    isDark ? 'bg-gray-700 text-white border-gray-600' : 'bg-gray-200 text-gray-900 border-gray-300'
                  } border focus:ring-2 ${
                    errors.expiryDate ? 'border-red-500 focus:ring-red-500' : 'focus:ring-orange-500'
                  } transition-all`}
                />
                {errors.expiryDate && (
                  <span className="text-red-500 text-xs mt-1 animate-[shake_0.3s]">{errors.expiryDate}</span>
                )}
              </div>

              <button
                type="button"
                onClick={handleSubmit}
                className={`w-full p-3 sm:p-4 rounded-lg text-sm sm:text-base font-semibold text-white bg-orange-500 hover:bg-orange-600 active:scale-95 transition-all mt-4 shadow-md animate-[fadeUp_0.6s_0.5s_forwards]`}
              >
                Submit
              </button>
            </div>

            {/* Theme Toggle */}
            <div className="p-4 sm:p-6 flex justify-center">
              <button
                onClick={toggleTheme}
                className="p-3 rounded-full bg-gray-700 text-white hover:bg-gray-600 transition-colors text-lg active:scale-95"
                aria-label="Toggle theme"
              >
                {isDark ? '‚òÄÔ∏è' : 'üåô'}
              </button>
            </div>

            {/* Links */}
            <div className="flex justify-between px-4 sm:px-6 pb-4 sm:pb-6 text-sm sm:text-base animate-[fadeUp_0.6s_0.6s_forwards]">
              <a href="../licence_cards/nsw.html" className={`${isDark ? 'text-gray-300 hover:text-gray-100' : 'text-gray-600 hover:text-gray-800'} transition-colors`}>NSW</a>
              <a href="../licence_cards/vic.html" className={`${isDark ? 'text-gray-300 hover:text-gray-100' : 'text-gray-600 hover:text-gray-800'} transition-colors`}>VIC</a>
              <a href="../licence_cards/qld.html" className={`${isDark ? 'text-gray-300 hover:text-gray-100' : 'text-gray-600 hover:text-gray-800'} transition-colors`}>QLD</a>
              <a href="../licence_cards/wa.html" className={`${isDark ? 'text-gray-300 hover:text-gray-100' : 'text-gray-600 hover:text-gray-800'} transition-colors`}>WA</a>
            </div>

            {/* Footer */}
            <footer className={`p-4 sm:p-6 text-center text-xs sm:text-sm ${
              isDark ? 'text-gray-400' : 'text-gray-600'
            } animate-[fadeUp_0.6s_0.7s_forwards]`}>
              AusGen - Digital License Generator
            </footer>
          </div>

          {/* State Selection Overlay */}
          {showOverlay && (
            <div className="fixed inset-0 bg-gray-900/95 flex items-center justify-center z-[1000] animate-[fadeIn_0.3s]">
              <div className={`bg-gray-700 rounded-2xl p-4 sm:p-6 max-w-xs w-[90%] text-center shadow-2xl ${
                isDark ? 'text-white' : 'text-gray-900'
              }`}>
                <h2 className="text-base sm:text-lg font-semibold mb-4">Choose your state</h2>
                <button
                  onClick={() => handleStateSelect('nsw')}
                  className="w-full p-3 mb-2 rounded-lg bg-orange-500 text-white font-semibold hover:bg-orange-600 active:scale-95 transition-all"
                >
                  NSW
                </button>
                <button
                  onClick={() => handleStateSelect('vic')}
                  className="w-full p-3 mb-2 rounded-lg bg-yellow-400 text-gray-900 font-semibold hover:bg-yellow-500 active:scale-95 transition-all"
                >
                  VIC
                </button>
                <button
                  onClick={() => handleStateSelect('qld')}
                  className="w-full p-3 mb-2 rounded-lg bg-blue-900 text-white font-semibold hover:bg-blue-800 active:scale-95 transition-all"
                >
                  QLD
                </button>
                <button
                  onClick={() => handleStateSelect('wa')}
                  className="w-full p-3 mb-2 rounded-lg bg-orange-600 text-white font-semibold hover:bg-orange-700 active:scale-95 transition-all"
                >
                  WA
                </button>
                <button
                  onClick={() => setShowOverlay(false)}
                  className={`w-full p-3 rounded-lg bg-transparent ${
                    isDark ? 'text-gray-400 hover:text-gray-300' : 'text-gray-600 hover:text-gray-800'
                  } font-semibold transition-colors`}
                >
                  Cancel
                </button>
              </div>
            </div>
          )}

          {/* Simplified Background Animation */}
          <div className="fixed inset-0 pointer-events-none hidden sm:block">
            <div className="absolute w-80 h-80 bg-blue-500/10 rounded-full filter blur-2xl animate-pulse opacity-10 -top-40 -left-40"></div>
            <div className="absolute w-80 h-80 bg-orange-500/10 rounded-full filter blur-2xl animate-pulse opacity-10 -bottom-40 -right-40"></div>
          </div>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>

  <style>
    @keyframes fadeUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
      }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      50% { transform: translateX(5px); }
      75% { transform: translateX(-5px); }
    }

    @media (max-width: 640px) {
      input, button, a {
        -webkit-tap-highlight-color: transparent;
      }
    }
  </style>
</body>
</html>