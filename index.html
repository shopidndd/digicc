<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="CommBank - Your Digital Banking Experience">
  <meta name="keywords" content="digital banking, banking app, financial services, digital cards">
  <meta name="author" content="Commonwealth Bank">
  <meta name="robots" content="index, follow">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <title>CommBank</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" defer></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    :root {
      --primary-yellow: #FFCD00;
      --secondary-yellow: #FFE55C;
      --accent-white: #FFFFFF;
      --background: #FFFEF7;
      --card-white: #ffffff;
      --text-primary: #8B7355;
      --text-secondary: #B8860B;
      --border-light: #F5F5DC;
      --shadow: 0 1px 3px 0 rgb(255 215 0 / 0.2);
      --shadow-lg: 0 10px 15px -3px rgb(255 215 0 / 0.3);
    }

    body {
      background: linear-gradient(135deg, #FFFEF7 0%, #FFF8DC 100%);
      color: var(--text-primary);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      min-height: 100vh;
    }

    .banking-gradient {
      background: linear-gradient(135deg, var(--primary-yellow) 0%, var(--accent-white) 100%);
    }

    .commbank-gradient {
      background: linear-gradient(135deg, #FFCD00 0%, #FFFFFF 100%);
    }

    .commbank-platinum {
      background: linear-gradient(135deg, #FFD700 0%, #FFCD00 50%, #FFFFFF 100%);
    }

    .card-shadow {
      box-shadow: var(--shadow-lg);
    }

    .balance-card {
      background: linear-gradient(135deg, #FFCD00 0%, #FFFFFF 100%);
    }

    .action-btn {
      transition: all 0.2s ease;
    }

    .action-btn:hover {
      transform: translateY(-2px);
    }

    .notification-dot {
      position: absolute;
      top: -4px;
      right: -4px;
      width: 12px;
      height: 12px;
      background: #ef4444;
      border-radius: 50%;
      border: 2px solid white;
    }

    /* Modal Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .digital-card-container {
      perspective: 1000px;
      width: 350px;
      height: 220px;
      position: relative;
    }

    .digital-card {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s;
      cursor: pointer;
    }

    .digital-card.flipped {
      transform: rotateY(180deg);
    }

    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      overflow: hidden;
    }

    .card-front {
      background: linear-gradient(135deg, #FFCD00 0%, #FFFFFF 100%);
      display: flex;
      flex-direction: column;
      padding: 20px;
      color: #8B7355;
      position: relative;
    }

    .card-back {
      transform: rotateY(180deg);
      background-image: url('App/assets/comm_visa_back.png');
      background-size: cover;
      background-position: center;
    }

    .card-logo {
      width: 60px;
      height: auto;
      margin-bottom: 20px;
    }

    .card-number {
      font-family: 'Courier New', monospace;
      font-size: 20px;
      font-weight: bold;
      letter-spacing: 4px;
      margin-bottom: 15px;
      text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.5);
      color: #8B4513;
    }

    .card-details {
      display: flex;
      justify-content: space-between;
      align-items: end;
      margin-top: auto;
    }

    .card-exp {
      font-family: 'Courier New', monospace;
      font-size: 14px;
    }

    .card-type {
      font-size: 12px;
      opacity: 0.8;
    }

    .cvv-area {
      position: absolute;
      top: 110px;
      right: 40px;
      background: #FFCD00;
      color: #8B4513;
      padding: 8px 12px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      font-weight: bold;
      font-size: 16px;
      border: 2px solid #FFFFFF;
    }

    .close-modal {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      font-size: 24px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .close-modal:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    .card-instruction {
      position: absolute;
      bottom: -60px;
      left: 50%;
      transform: translateX(-50%);
      color: white;
      font-size: 14px;
      text-align: center;
      opacity: 0.8;
    }
  </style>
</head>
<body>
  <!-- Mobile Banking App Interface -->
  <div class="min-h-screen bg-gradient-to-br from-yellow-50 to-white flex flex-col max-w-sm mx-auto relative overflow-hidden">
    
    <!-- Header -->
    <header class="commbank-gradient text-white p-6 pb-8 relative">
      <div class="flex items-center justify-between mb-6">
        <div class="flex items-center space-x-3">
          <div class="w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center">
            <img src="App/assets/commbank.png" alt="Commonwealth Bank" class="w-8 h-8 object-contain">
          </div>
          <div>
            <h1 class="text-xl font-semibold text-amber-800">CommBank</h1>
            <p class="text-amber-700 text-sm">Welcome back, John</p>
          </div>
        </div>
        <div class="flex items-center space-x-4">
          <div class="relative">
            <i class="fas fa-bell text-white text-lg cursor-pointer"></i>
            <div class="notification-dot"></div>
          </div>
          <div class="w-8 h-8 bg-white/30 rounded-full flex items-center justify-center cursor-pointer">
            <i class="fas fa-user text-sm text-amber-800"></i>
          </div>
        </div>
      </div>
      
      <!-- Balance Card -->
      <div class="balance-card rounded-2xl p-6 text-white card-shadow">
        <div class="flex justify-between items-start mb-4">
          <div>
            <p class="text-amber-800/80 text-sm">Total Balance</p>
            <h2 class="text-3xl font-bold text-amber-900">$0.00</h2>
            <p class="text-amber-800/80 text-sm mt-1">+$0 this month</p>
          </div>
          <div class="text-right">
            <p class="text-amber-800/80 text-xs">Account</p>
            <p class="text-sm font-medium text-amber-900">•••• 0000</p>
          </div>
        </div>
        <div class="flex space-x-4 mt-6">
          <button class="flex-1 bg-white/30 backdrop-blur-sm rounded-xl p-3 text-center action-btn">
            <i class="fas fa-arrow-up text-lg mb-2 block text-amber-800"></i>
            <span class="text-sm font-medium text-amber-800">Send</span>
          </button>
          <button class="flex-1 bg-white/30 backdrop-blur-sm rounded-xl p-3 text-center action-btn">
            <i class="fas fa-arrow-down text-lg mb-2 block text-amber-800"></i>
            <span class="text-sm font-medium text-amber-800">Receive</span>
          </button>
          <button class="flex-1 bg-white/30 backdrop-blur-sm rounded-xl p-3 text-center action-btn">
            <i class="fas fa-exchange-alt text-lg mb-2 block text-amber-800"></i>
            <span class="text-sm font-medium text-amber-800">Transfer</span>
          </button>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 px-6 py-6 space-y-6">
      
      <!-- Platinum Rewards Button -->
      <section>
        <div class="mb-6">
          <button id="platinumRewardsBtn" class="w-full commbank-platinum text-white rounded-2xl p-6 card-shadow action-btn block text-left">
            <div class="flex items-center space-x-4">
              <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center">
                <i class="fas fa-gem text-white text-lg"></i>
              </div>
              <div class="flex-1">
                <h4 class="font-semibold text-amber-800 mb-1">View Platinum Credit Rewards</h4>
                <p class="text-amber-700 text-sm">Explore your exclusive rewards and benefits</p>
              </div>
              <div>
                <i class="fas fa-arrow-right text-amber-800 text-lg"></i>
              </div>
            </div>
          </button>
        </div>
      </section>

      <!-- Quick Actions -->
      <section>
        <h3 class="text-lg font-semibold mb-4 text-gray-900">Digital Services</h3>
        <div class="grid grid-cols-2 gap-4">
          
          <!-- Digital Credit Card -->
          <a href="forms/credit_card/index.html" class="bg-white rounded-2xl p-6 card-shadow action-btn block">
            <div class="w-12 h-12 commbank-gradient rounded-xl flex items-center justify-center mb-4">
              <i class="fas fa-credit-card text-white text-lg"></i>
            </div>
            <h4 class="font-semibold text-amber-800 mb-2">CommBank Card</h4>
            <p class="text-amber-600 text-sm">Create CommBank virtual cards</p>
          </a>
          
          <!-- Driver's License -->
          <a href="forms/licence/index.html" class="bg-white rounded-2xl p-6 card-shadow action-btn block">
            <div class="w-12 h-12 bg-gray-600 rounded-xl flex items-center justify-center mb-4">
              <i class="fas fa-id-card text-white text-lg"></i>
            </div>
            <h4 class="font-semibold text-amber-800 mb-2">Digital ID</h4>
            <p class="text-amber-600 text-sm">Secure ID management</p>
          </a>
          
          <!-- Medicare Card -->
          <a href="forms/medicare/index.html" class="bg-white rounded-2xl p-6 card-shadow action-btn block">
            <div class="w-12 h-12 bg-green-600 rounded-xl flex items-center justify-center mb-4">
              <i class="fas fa-notes-medical text-white text-lg"></i>
            </div>
            <h4 class="font-semibold text-amber-800 mb-2">Health Services</h4>
            <p class="text-amber-600 text-sm">Medical card access</p>
          </a>
          
          <!-- Card Settings -->
          <a href="select.html" class="bg-white rounded-2xl p-6 card-shadow action-btn block">
            <div class="w-12 h-12 commbank-gradient rounded-xl flex items-center justify-center mb-4">
              <i class="fas fa-cog text-white text-lg"></i>
            </div>
            <h4 class="font-semibold text-amber-800 mb-2">Account Settings</h4>
            <p class="text-amber-600 text-sm">CommBank services</p>
          </a>
        </div>
      </section>

      <!-- Recent Transactions -->
      <section>
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-semibold text-amber-800">Recent Activity</h3>
          <button class="text-amber-600 text-sm font-medium">View All</button>
        </div>
        <div class="bg-white rounded-2xl card-shadow overflow-hidden">
          
          <div class="p-4 border-b border-gray-100">
            <div class="flex items-center space-x-4">
              <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center">
                <i class="fas fa-arrow-down text-green-600"></i>
              </div>
              <div class="flex-1">
                <p class="font-semibold text-amber-800">CommBank Card Created</p>
                <p class="text-amber-600 text-sm">Awards Credit Card</p>
              </div>
              <div class="text-right">
                <p class="font-semibold text-amber-800">Today</p>
                <p class="text-amber-600 text-sm">2:30 PM</p>
              </div>
            </div>
          </div>
          
          <div class="p-4 border-b border-gray-100">
            <div class="flex items-center space-x-4">
              <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                <i class="fas fa-id-card text-blue-600"></i>
              </div>
              <div class="flex-1">
                <p class="font-semibold text-amber-800">License Updated</p>
                <p class="text-amber-600 text-sm">NSW Driver License</p>
              </div>
              <div class="text-right">
                <p class="font-semibold text-amber-800">Yesterday</p>
                <p class="text-amber-600 text-sm">4:15 PM</p>
              </div>
            </div>
          </div>
          
          <div class="p-4">
            <div class="flex items-center space-x-4">
              <div class="w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center">
                <i class="fas fa-notes-medical text-red-600"></i>
              </div>
              <div class="flex-1">
                <p class="font-semibold text-amber-800">Medicare Access</p>
                <p class="text-amber-600 text-sm">Digital card viewed</p>
              </div>
              <div class="text-right">
                <p class="font-semibold text-amber-800">2 days ago</p>
                <p class="text-amber-600 text-sm">10:22 AM</p>
              </div>
            </div>
          </div>
        </div>
      </section>

    </main>

    <!-- Bottom Navigation -->
    <nav class="bg-white border-t border-gray-200 px-6 py-4">
      <div class="flex justify-around">
        <button class="flex flex-col items-center space-y-1">
          <i class="fas fa-home text-[#FFCD00] text-lg"></i>
          <span class="text-xs text-[#FFCD00] font-medium">Home</span>
        </button>
        <button class="flex flex-col items-center space-y-1" onclick="window.location.href='select.html'">
          <i class="fas fa-credit-card text-gray-400 text-lg"></i>
          <span class="text-xs text-gray-400">Cards</span>
        </button>
        <button class="flex flex-col items-center space-y-1">
          <i class="fas fa-chart-bar text-gray-400 text-lg"></i>
          <span class="text-xs text-gray-400">Analytics</span>
        </button>
        <button class="flex flex-col items-center space-y-1">
          <i class="fas fa-user text-gray-400 text-lg"></i>
          <span class="text-xs text-gray-400">Profile</span>
        </button>
      </div>
    </nav>
  </div>

  <!-- Digital Card Modal -->
  <div id="cardModal" class="modal-overlay">
    <button class="close-modal" onclick="closeCardModal()">&times;</button>
    <div class="digital-card-container">
      <div id="digitalCard" class="digital-card">
        <!-- Front of Card -->
        <div class="card-face card-front">
          <img src="App/assets/commbank.png" alt="CommBank" class="card-logo">
          <div class="card-number">4065 8713 1648 9176</div>
          <div class="card-details">
            <div>
              <div class="card-type">PLATINUM REWARDS</div>
              <div class="card-exp">EXP 01/28</div>
              <div class="card-name" style="font-family: 'Courier New', monospace; font-size: 14px; font-weight: bold; margin-top: 8px; color: #8B4513;">HARISH CHAUDHARI</div>
            </div>
            <div class="text-right">
              <div class="card-type">VISA</div>
            </div>
          </div>
        </div>
        <!-- Back of Card -->
        <div class="card-face card-back">
          <div class="cvv-area">426</div>
        </div>
      </div>
      <div class="card-instruction">
        Double-click or tap to flip card
      </div>
    </div>
  </div>

  <script>
    const animateElement = (selector, props, delay = 0) => {
      if (window.gsap) {
        gsap.from(selector, {
          ...props,
          duration: 0.6,
          ease: "power2.out",
          delay
        });
      }
    };

    const toggleTheme = () => {
      try {
        const html = document.documentElement;
        const themeAnnouncer = document.getElementById('theme-announcer');
        const themeIcon = document.querySelector('.theme-icon');
        const sunPaths = document.querySelectorAll('.sun');
        const moonPath = document.querySelector('.moon');
        const newTheme = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';

        html.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);

        if (newTheme === 'dark') {
          sunPaths.forEach(path => path.style.display = 'block');
          moonPath.style.display = 'none';
        } else {
          sunPaths.forEach(path => path.style.display = 'none');
          moonPath.style.display = 'block';
        }

        if (themeAnnouncer) {
          themeAnnouncer.textContent = `Theme switched to ${newTheme} mode`;
        }

        if (window.gsap) {
          gsap.to("body", {
            background: 'var(--background-gradient)',
            duration: 0.4,
            ease: "power2.inOut"
          });
          gsap.to('.theme-icon', {
            scale: 1.2,
            duration: 0.2,
            ease: "power2.out",
            yoyo: true,
            repeat: 1
          });
        }
      } catch (error) {
        console.error('Theme toggle failed:', error);
      }
    };

    const debounce = (func, wait) => {
      let timeout;
      return (...args) => {
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(this, args), wait);
      };
    };

    const navigateWithAnimation = (url) => {
      const enterApp = document.getElementById('enterApp');
      if (enterApp) {
        enterApp.classList.add('loading');
        enterApp.disabled = true;
      }
      if (window.gsap) {
        gsap.to("main", {
          opacity: 0,
          y: -30,
          duration: 0.4,
          ease: "power2.in",
          onComplete: () => window.location.href = url
        });
      } else {
        window.location.href = url;
      }
    };

    const initTiltEffect = () => {
      const card = document.querySelector('main');
      if (!card) return;

      const handleMove = (e) => {
        const rect = card.getBoundingClientRect();
        const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
        const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
        const centerX = rect.width / 2;
        const centerY = rect.height / 2;
        const tiltX = (y - centerY) / centerY * 6;
        const tiltY = -(x - centerX) / centerX * 6;
        if (window.gsap) {
          gsap.to(card, {
            rotationX: tiltX,
            rotationY: tiltY,
            duration: 0.2,
            ease: "power2.out",
            transformPerspective: 800
          });
        }
      };

      card.addEventListener('mousemove', handleMove);
      card.addEventListener('touchmove', handleMove);

      card.addEventListener('mouseleave', () => {
        if (window.gsap) {
          gsap.to(card, {
            rotationX: 0,
            rotationY: 0,
            duration: 0.4,
            ease: "power2.out"
          });
        }
      });

      card.addEventListener('touchend', () => {
        if (window.gsap) {
          gsap.to(card, {
            rotationX: 0,
            rotationY: 0,
            duration: 0.4,
            ease: "power2.out"
          });
        }
      });
    };

    const initPage = () => {
      try {
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
          document.documentElement.setAttribute('data-theme', savedTheme);
          const sunPaths = document.querySelectorAll('.sun');
          const moonPath = document.querySelector('.moon');
          if (savedTheme === 'dark') {
            sunPaths.forEach(path => path.style.display = 'block');
            moonPath.style.display = 'none';
          } else {
            sunPaths.forEach(path => path.style.display = 'none');
            moonPath.style.display = 'block';
          }
        }

        const enterApp = document.getElementById('enterApp');
        const themeToggle = document.getElementById('themeToggle');
        const debouncedNavigate = debounce(() => navigateWithAnimation('select.html'), 300);

        if (enterApp) {
          enterApp.addEventListener('click', debouncedNavigate);
          enterApp.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              debouncedNavigate();
            }
          });
        }

        if (themeToggle) {
          themeToggle.addEventListener('click', toggleTheme);
          themeToggle.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              toggleTheme();
            }
          });
        }

        animateElement("main", { opacity: 0, y: 30 }, 0.1);
        animateElement(".logo-container", { scale: 0.9, opacity: 0, ease: "back.out(1.5)" }, 0.2);
        animateElement("h1", { x: -20, opacity: 0, ease: "power2.out" }, 0.3);
        animateElement("#enterApp", { scale: 0.9, opacity: 0, ease: "back.out(1.5)" }, 0.5);
        animateElement("#themeToggle", { scale: 0.9, opacity: 0, ease: "back.out(1.5)" }, 0.6);
        initTiltEffect();
      } catch (error) {
        console.error('Page initialization failed:', error);
      }
    };

    // Card Modal Functions
    const showCardModal = () => {
      const modal = document.getElementById('cardModal');
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
      
      // Reset card to front side
      const card = document.getElementById('digitalCard');
      card.classList.remove('flipped');
      
      // Add entrance animation
      if (window.gsap) {
        gsap.fromTo('.digital-card-container', 
          { scale: 0.5, opacity: 0, rotationY: -180 },
          { scale: 1, opacity: 1, rotationY: 0, duration: 0.6, ease: 'back.out(1.7)' }
        );
      }
    };

    const closeCardModal = () => {
      const modal = document.getElementById('cardModal');
      modal.classList.remove('active');
      document.body.style.overflow = 'auto';
    };

    const flipCard = () => {
      console.log('Flip card function called'); // Debug log
      const card = document.getElementById('digitalCard');
      if (card) {
        card.classList.toggle('flipped');
        console.log('Card flipped:', card.classList.contains('flipped')); // Debug log
        
        // Add flip animation feedback
        if (window.gsap) {
          gsap.to(card, {
            scale: 1.05,
            duration: 0.1,
            yoyo: true,
            repeat: 1,
            ease: 'power2.inOut'
          });
        }
      }
    };

    // Add click counter for double-click detection
    let clickCount = 0;
    let clickTimer = null;
    
    const handleCardClick = (event) => {
      clickCount++;
      
      if (clickCount === 1) {
        // Start timer for double-click detection
        clickTimer = setTimeout(() => {
          // Single click - do nothing or add single click behavior
          clickCount = 0;
        }, 300); // 300ms window for double-click
      } else if (clickCount === 2) {
        // Double click detected
        clearTimeout(clickTimer);
        clickCount = 0;
        flipCard();
      }
    };
    
    // Alternative touch-based flip for mobile
    const handleCardTouch = (event) => {
      event.preventDefault();
      flipCard();
    };

    // Close modal when clicking outside the card
    document.getElementById('cardModal').addEventListener('click', (e) => {
      if (e.target.id === 'cardModal') {
        closeCardModal();
      }
    });

    // Close modal with Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeCardModal();
      }
    });

    document.addEventListener('DOMContentLoaded', initPage);
    
    // Initialize platinum rewards button and card interactions
    document.addEventListener('DOMContentLoaded', () => {
      const platinumBtn = document.getElementById('platinumRewardsBtn');
      if (platinumBtn) {
        platinumBtn.addEventListener('click', showCardModal);
      }
      
      // Initialize card flip functionality after modal is shown
      setTimeout(() => {
        const digitalCard = document.getElementById('digitalCard');
        if (digitalCard) {
          // Add multiple event listeners for better compatibility
          digitalCard.addEventListener('dblclick', flipCard);
          digitalCard.addEventListener('click', handleCardClick);
          digitalCard.addEventListener('touchstart', handleCardTouch, { passive: false });
          
          console.log('Card event listeners attached');
        }
      }, 100);
    });
  </script>
</body>
</html>